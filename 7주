#include <ir_Lego_PF_BitStreamEncoder.h>
#include <IRremote.h>
#include <Adafruit_NeoPixel.h>

#define LED 11
const int remoteSensor = 7;
int in;
Adafruit_NeoPixel pixels = Adafruit_NeoPixel(1, LED, NEO_GRB + NEO_KHZ800);
IRrecv irrecv(remoteSensor);
decode_results results;

int r = 50;
int g = 50;
int b = 50;
int a = 0;
int k = 0;
void setup() {
  irrecv.enableIRIn();
  irrecv.blink13(true);
  Serial.begin(9600);
  pixels.begin();
  pixels.show();
}

void loop() {
  if (Serial.available()) {
    in = Serial.read();
    Serial.println(in);

    if (in == 48) {
      pixels.setPixelColor(0, 0, 0, 0);
      pixels.show();
    }
    else if (in == 49) {
      pixels.setPixelColor(0, 50, 0, 0);
      pixels.show();
    }
    else if (in == 50) {
      pixels.setPixelColor(0, 0, 50, 0);
      pixels.show();
      
    }
    else if (in == 51) {
      pixels.setPixelColor(0, 0, 0, 50);
      pixels.show();
      
    }
    else if (in == 53) {
      r += 10;
      g += 10;
      b += 10;
      
      if (a == 0) {
        pixels.setPixelColor(0, r, 0, 0);
        pixels.show();
      }
      if (a == 1) {
        pixels.setPixelColor(0, 0, g, 0);
        pixels.show();
      }
      if (a == 2) {
        pixels.setPixelColor(0, 0, 0, b);
        pixels.show();
      }
    }
    else if (in == 56) {
      r -= 10;
      g -= 10;
      b -= 10;
      
      if (a == 0) {
        pixels.setPixelColor(0, r, 0, 0);
        pixels.show();
      }
      if (a == 1) {
        pixels.setPixelColor(0, 0, g, 0);
        pixels.show();
      }
      if (a == 2) {
        pixels.setPixelColor(0, 0, 0, b);
        pixels.show();
      }
    }
  }
    
  if (irrecv.decode(&results)) {
    if (results.decode_type == NEC) {
 
    
      if (results.value == 0x00FFA25D) {
        if(k == 0){
        switch(a){
          case 0 :
            pixels.setPixelColor(0, r, 0, 0);
            pixels.show();
            k = 1;
            break;
          case 1 :
            pixels.setPixelColor(0, 0,g, 0);
            pixels.show();
            k = 1;
            break;
          case 2 :
            pixels.setPixelColor(0, 0, 0,b);
            pixels.show();
            k = 1;
            break;
          }
        }
       else if(k == 1){
        pixels.setPixelColor(0, 0, 0, 0);
        pixels.show();
        k = 0;
       }
      }
      
    
      else if (results.value == 0x00FF6897 ) {
        pixels.setPixelColor(0, 0, 0, 0);
        pixels.show();
        k = 0;
     
      }
      else if (results.value == 0x00FF30CF) {
        a = 0;
        pixels.setPixelColor(0,r, 0, 0);
        pixels.show();
        
      }
      else if (results.value == 0x00FF18E7 ) {
        a = 1;
        pixels.setPixelColor(0, 0, g, 0);
        pixels.show();
      }
      else if (results.value == 0x00FF7A85) {
        a = 2;
        pixels.setPixelColor(0, 0, 0, b);
        pixels.show();
      }
      else if (results.value == 0x00FF38C7) {
        r += 10;
        g += 10;
        b += 10;
        
        if (a == 0) {
          pixels.setPixelColor(0, r, 0, 0);
          pixels.show();
        }
        if (a == 1) {
          pixels.setPixelColor(0, 0, g, 0);
          pixels.show();
        }
        if (a == 2) {
          pixels.setPixelColor(0, 0, 0, b);
          pixels.show();
        }
      }
      else if (results.value == 0x00FF4AB5) {
        r -= 10;
        g -= 10;
        b -= 10;
        
        if (a == 0) {
          pixels.setPixelColor(0, r, 0, 0);
          pixels.show();
        }
        if (a == 1) {
          pixels.setPixelColor(0, 0, g, 0);
          pixels.show();
        }
        if (a == 2) {
          pixels.setPixelColor(0, 0, 0, b);
          pixels.show();
        }
      }
       
  }
    irrecv.resume();
  
  
    }
  
}
